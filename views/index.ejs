<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <script src="https://www.google.com/recaptcha/api.js?6LdcKRUnAAAAAJg9Zs0XWs7jBT9LUAc_NkSlYKS3"></script>

        <title>مركز الوطني لتطوير النظام الصحي </title>
        <style>
            * {
              box-sizing: border-box;
            }
            
            body {
              background-color: #f1f1f1;
            }
            
            #regForm {
              background-color: #ffffff;
              margin: 100px auto;
              font-family: Raleway;
              padding: 40px;
              width: 70%;
              min-width: 300px;
            }
            
            h1 {
              text-align: center;  
            }
            
            input {
              padding: 10px;
              width: 100%;
              font-size: 17px;
              font-family: Raleway;
              border: 1px solid #aaaaaa;
            }
            
            /* Mark input boxes that gets an error on validation: */
            input.invalid {
              background-color: #ffdddd;
            }
            
            /* Hide all steps by default: */
            .tab {
              display: none;
            }
            
            button {
              background-color: #04AA6D;
              color: #ffffff;
              border: none;
              padding: 10px 20px;
              font-size: 17px;
              font-family: Raleway;
              cursor: pointer;
            }
            
            button:hover {
              opacity: 0.8;
            }
            
            #prevBtn {
              background-color: #bbbbbb;
            }
            
            /* Make circles that indicate the steps of the form: */
            .step {
              height: 15px;
              width: 15px;
              margin: 0 2px;
              background-color: #bbbbbb;
              border: none;  
              border-radius: 50%;
              display: inline-block;
              opacity: 0.5;
            }
            
            .step.active {
              opacity: 1;
            }
            
            /* Mark the steps that are finished and valid: */
            .step.finish {
              background-color: #04AA6D;
            }
            </style>

    </head>
    <body>
      




        <form id="regForm">
          <h1 class="title" style="font-family: 'Segoe UI';">المركز الوطني لتطوير النظام الصحي </h1>
<br>
<hr>
            <h1 style="color: #04AA6D;" class="title">رقم صحي جديد </h1>
            <!-- One "tab" for each step in the form: -->
            <div style="text-align: right;" class="tab">معلومات 
              <p><input style="text-align: right;" placeholder="... رقم الوطني " oninput="this.className = ''" name="fname" id="num"></p>
              <p><input style="text-align: right;" placeholder="... رقم الهاتف " oninput="this.className = ''" name="lname" id="num2"></p>
            </div>
            <br>
            <div class="tab" style="text-align: center;">تحقق
                <div style="background-color:white;left:500px; border-color:white; text-align: center;" >
                    <div  style="text-align: right;" class="g-recaptcha" data-sitekey="6LdcKRUnAAAAAJg9Zs0XWs7jBT9LUAc_NkSlYKS3"></div>
                  </div>
            </div>
            <div class="tab" style="text-align: right;">بيانات المواظن 
                <div class="card">
                    <div style="text-align: center;" class="card-header">املأ البيانات التالية </div>
                    <div class="card-body">
                        <form action="/views/log" method="POST">
                        <div class="text-center text-primary mt-3 mb-3">
                            <select name="country" id="country" class="form-control">
                                <option style="text-align: center;" value="">اختر المدينة </option>
                                <% for(var count = 0; count < country_data.length; count++) { %>
    
                                <option style="text-align: center;" value="<%= country_data[count].country %>"><%= country_data[count].country %></option>
    
                                <% } %>
                            </select>
                        </div>
                        <div class="mb-3">
                            <select style="text-align: center;" name="state" id="state" class="form-control">
                                <option style="text-align: center;" value="">اختر المنطقة</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <select  style="text-align: center;" name="city" id="city" class="form-control">
                                <option style="text-align: center;" value="">اختر المركز</option>
                            </select>
                        </div>
                        <div class="mb-3">
                        
                          <input type="text" readonly style="text-align: center;"  placeholder="الأسم كاملا "  class="form-control" id="name" name="name">
                            
                        </div>  
                         <div class="mb-3">
                          
                          <input type="text" readonly style="text-align: center;"  placeholder="رقم الوطني "  class="form-control" id="num_libya" name="num_libya">
                            
                        </div>
             
                        <div class="mb-3">
              
                          <input type="text" readonly style="text-align: center;"  placeholder="رقم الهاتف "  class="form-control" id="num_person" name="num_person">
                          
                        </div>
                        <div class="mb-3">
        
                                <input type="text" readonly style="text-align: center;"  placeholder="اسم اأم كاملا "  class="form-control" id="namemom" name="namemom">
                        </div>
                        <div class="mb-3">
        
                          <input type="email"  style="text-align: center;"  placeholder="البريد الألكتروني"  class="form-control">
                  </div>
            </form>
    
                    </div>
                </div>
            </div>
            </div>
            <div class="tab" style="text-align: right;">بيانات الرقم الصحي 
              <p style="text-align: center; font-family: 'Segoe UI'; color: green;">قم بأخد لقطة شاشة لحفط الرقم الصحي الخاص بك في هاتفك </p>

              <p style="text-align: right;">: الرقم الوظني </p>
              <input type="text" readonly style="text-align: center;"  placeholder="رقم الوطني"  class="form-control" id="num_libya1" name="num_libya1">
              <br>
              <p style="text-align: right;">: الرقم الصحي الخاص بك </p>
              <input type="text" readonly style="text-align: center;"  placeholder="رقم الصحي "  class="form-control" id="num_work" name="num_work">
              <br>
              <br>
            </div>
            <div style="overflow:auto;">
              <div style=" text-align: center;">
                <button type="button"  id="prevBtn" onclick="nextPrev(-1)">رجوع </button>
                <button type="button" id="nextBtn" onclick="nextPrev(1)">التالي </button>
              </div>
            </div>
            <!-- Circles which indicates the steps of the form: -->
            <div style="text-align:center;margin-top:40px;">
              <span class="step"></span>
              <span class="step"></span>
              <span class="step"></span>
              <span class="step"></span>
            </div>
          </form>
          
          <script>
          var currentTab = 0; // Current tab is set to be the first tab (0)
          showTab(currentTab); // Display the current tab
          
          function showTab(n) {
            // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab");
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
              document.getElementById("prevBtn").style.display = "none";
            } else {
              document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
              document.getElementById("nextBtn").innerHTML = "تم انشاء رقم صحي بنجاح ";
            } else {
              document.getElementById("nextBtn").innerHTML = "التالي ";
            }
            //... and run a function that will display the correct step indicator:
            fixStepIndicator(n)
          }
          
          function nextPrev(n) {
           var namemom ;
           var name;
           var num_libya;
           var num_person;
           var num_work;
            // This function will figure out which tab to display
            var num =document.getElementById('num').value;
            var num2 =document.getElementById('num2').value;
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
           
            if (num=="1199924729293"&& num2=="0926443166"){
namemom=" العزيبي فاطمة المعمري ";
num_libya ="1199924729293";
num_person ="0926443166";
name="محمد خليفة العزيبي ";
num_work="114-565";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          if (num=="119995475248"&& num2=="0915663166"){
namemom="عائشة محمود علي ";
num_libya ="119995475248";
num_person ="0915663166";
name="محمود علي احمد الصادق ";
num_work="115-424";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          if (num=="1120015462315"&& num2=="0924883125"){
namemom=" يسري احمد علي ";
num_libya ="1120015462315";
num_person ="0924883125";
name="حمزه علي محمود الصربي ";
num_work="116-245";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          if (num=="1120062536148"&& num2=="0914383125"){
namemom=" سالمة محمود علي احمد المشري ";
num_libya ="1120062536148";
num_person ="0914383125";
name="عبد الحكيم محمود سليمان ";
num_work="117-233";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          if (num=="11200451263"&& num2=="0924883166"){
namemom=" حنان علي محمود ";
num_libya ="11200451263";
num_person ="0924883166";
name="محي الدين محمود النصري ";
num_work="116-200";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          if (num=="112003154789"&& num2=="0925684521"){
namemom=" ليلة محمود احمد ";
num_libya ="112003154789";
num_person ="0925684521";
name="نصر الدين محمود الشعافي ";
num_work="116-230";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
               showTab(currentTab);
             
            // if you have reached the end of the form...
          }
          

            if (currentTab >= x.length) {
              // ... the form gets submitted:
              document.getElementById("regForm").submit();
              return false;
            }
      
            document.getElementById('num_libya').value=num_libya;
            document.getElementById('namemom').value=namemom;
            document.getElementById('num_person').value=num_person;
            document.getElementById('name').value=name;
            document.getElementById('num_libya1').value=num_libya;
            document.getElementById('num_work').value=num_work;



            
           
            // Otherwise, display the correct tab:
            showTab(currentTab);
          }
          
          function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].getElementsByTagName("input");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
              // If a field is empty...
              if (y[i].value == "") {
                // add an "invalid" class to the field:
                y[i].className += " invalid";
                // and set the current valid status to false
                valid = false;
              }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
              document.getElementsByClassName("step")[currentTab].className += " finish";
            }
            return valid; // return the valid status
          }
          
          function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
              x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class on the current step:
            x[n].className += " active";
          }
          </script>
          
    </body>
</html>
<script>

function move(){
window.Location.assign("views/log.ejs");
alert("login done crrcet informashon ");


}
</script>
<script>

function _(element)
{
    return document.getElementById(element);
}

function fetch_data(parent_element, child_element, type)
{
    fetch('/get_data?type='+type+'&parent_value='+parent_element.value+'').then(function(response){
        return response.json();
    }).then(function(responseData){

        var html = '';

        if(type == 'load_state')
        {
            html = '<option value="">اختر المنطقة </option>';
        }

        if(type == 'load_city')
        {
            html = '<option value="">اختر المركز </option>';
        }

        for(var count = 0; count < responseData.length; count++)
        {
            html += '<option value="'+responseData[count]+'">'+responseData[count]+'</option>';
        }

        child_element.innerHTML = html;
    });
}

_('country').onchange = function(){

    fetch_data(_('country'), _('state'), 'load_state');

};

_('state').onchange = function(){

    fetch_data(_('state'), _('city'), 'load_city');

};



</script>